(this["webpackJsonpthe-shoppies"]=this["webpackJsonpthe-shoppies"]||[]).push([[0],{14:function(e,t,a){e.exports=a(38)},19:function(e,t,a){},20:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),c=a.n(r);a(19),a(20);function l(){return o.a.createElement("header",null,o.a.createElement("h1",null,"The Shoppies"),o.a.createElement("h3",null,"Search and nominate 5 movies"))}var i=a(2),s=a(3),m=a.n(s);function u(e){var t=e.movie,a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],l=r[1];function s(e){var t=document.getElementsByTagName("body")[0],a=document.createElement("p");a.className="notification",a.innerHTML=e,t.appendChild(a),setTimeout((function(){t.removeChild(a)}),6e3)}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("nominees"));if(e){for(var a=0,n=!1;e.length>a&&!n;)e[a].imdbID===t.imdbID&&(n=!0,l(!0)),a++;5===JSON.parse(localStorage.getItem("nominees")).length&&s("Great job! You nominated 5 movies.")}})),o.a.createElement("div",{className:"movieCard"},o.a.createElement("img",{className:c?"disabled":"enabled",src:t.Poster&&"N/A"!==t.Poster?t.Poster:"/the-shoppies/img/noImage.png",alt:"".concat(t.Title," poster")}),o.a.createElement("h5",null,t.Title),o.a.createElement("p",null,t.Year),o.a.createElement("button",{className:c?"disabled":"enabled",onClick:function(){var e=JSON.parse(localStorage.getItem("nominees"));e||(localStorage.setItem("nominees",JSON.stringify([])),e=JSON.parse(localStorage.getItem("nominees"))),e.length>=5?s("You can nominate only 5 movies."):c?s("You already nominated this film."):(e.push(t),localStorage.setItem("nominees",JSON.stringify(e)),window.location.reload(!1))}}," ",c?"Nominated":"Nominate"),o.a.createElement("a",{href:"https://www.imdb.com/title/".concat(t.imdbID,"/"),target:"_blank",rel:"noopener noreferrer"},"Check on IMDB"))}var d=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],d=l[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),f=g[0],p=g[1],v=Object(n.useState)("Search for a movie!"),S=Object(i.a)(v,2),b=S[0],E=S[1],N=Object(n.useState)(""),O=Object(i.a)(N,2),I=O[0],y=O[1],j="",w=function(e){if(e)localStorage.setItem("lastSearch",e);else{var t=localStorage.getItem("lastSearch")&&1!==localStorage.getItem("lastSearch").length?localStorage.getItem("lastSearch"):function(){var e=["Star Wars","Harry Potter","Spider-Man","Ready Player One","Rocky","Jojo Rabbit","Avengers","Star Trek","Lord of the Rings","The Matrix","The Hobbit","Toy Story"];return e[Math.floor(Math.random()*e.length)]}();y(t),e=t,localStorage.setItem("lastSearch","")}var a="https://www.omdbapi.com/?i=tt3896198&apikey=7769270d&s=".concat(e,"&type=movie");j&&j.cancel(),j=m.a.CancelToken.source(),m.a.get(a,{cancelToken:j.token}).then((function(e){E("True"===e.data.Response?"Search a movie!":"Didn't found any movies. Search again!"),d(e.data.Search),p(!1)})).catch((function(e){(m.a.isCancel(e)||e)&&(p(!1),E("Failed to fetch"))}))};return Object(n.useEffect)((function(){w(a)}),[a]),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"searchContainer"},o.a.createElement("i",{className:"fa fa-search icon"}," "),o.a.createElement("input",{type:"text",value:a,id:"searchBar",placeholder:I,onChange:function(e){var t=e.target.value;p(!0),E(""),r(t)}})),o.a.createElement("div",{className:"movies"},f?o.a.createElement("object",{type:"image/svg+xml",data:"/the-shoppies/load.svg",className:"loading"},"Loading..."):"",s?s.map((function(e){return o.a.createElement(u,{movie:e,key:e.imdbID})})):o.a.createElement("p",{className:"message"},b)))};function h(e){var t=e.movie;return o.a.createElement("div",{className:"nomineeMovie"},o.a.createElement("img",{src:t.Poster&&"N/A"!==t.Poster?t.Poster:"/img/noImage.png",alt:"".concat(t.Title," poster")}),o.a.createElement("div",{className:"info"},o.a.createElement("h5",null,t.Title),o.a.createElement("p",null,t.Year),o.a.createElement("button",{onClick:function(){for(var e=JSON.parse(localStorage.getItem("nominees")),a=0,n=!1;e.length>a&&!n;)e[a].imdbID===t.imdbID&&(n=!0,e.splice(a,1),localStorage.setItem("nominees",JSON.stringify(e)),window.location.reload(!1)),a++;console.log("Problem")}},"Unnominate")))}function g(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){r(JSON.parse(localStorage.getItem("nominees")))}),[]),o.a.createElement("div",{className:"nominees"},o.a.createElement("h2",null,"My nominees (",a?a.length:"0","/5)"),a?a.map((function(e){return o.a.createElement(h,{movie:e,key:e.imdbID})})):"")}var f=function(){return o.a.createElement("div",{id:"wrapper"},o.a.createElement(l,null),o.a.createElement("main",null,o.a.createElement(d,null),o.a.createElement(g,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.2ef49f33.chunk.js.map